strict digraph {
  graph [
    splines=true,
  ]
  node [
    style="filled",
    fontname="sans-serif",
    color="#3fa687",
    fillcolor="#275a4b",
    fontcolor="white",
    shape="box",
    penwidth=2,
    width=4.1,
  ];
  edge [
    color="#3fa687",
    fontcolor="#275a4b",
    fontname="sans-serif",
    penwidth=2,
    labelfloat=true,
  ];

  Start[shape="Mrecord", width=0.75];
  End[shape="Mrecord", width=0.75];

  IfCPU[label=<CPU/MCU<BR/>already ported?>, shape="diamond"];
  IfBoard[label=<Board definitions<BR/>already provided?>, shape="diamond"];
  IfDrivers[label=<All on-board<BR/>devices supported?>, shape="diamond"];
  IfNetdev[label=<Network device<BR/>supported by<BR/>network stack?>, shape="diamond"];

  PortCPU[label=<Port <B>CPU</B>>, URL="porting-cpus.html"];
  PortBoard[label=<Provide<BR/><B>board definitions</B>>, URL="porting-boards.html"];
  PortDrivers[label=<Provide<BR/><B>device drivers</B>>, URL="driver-guide.html"];
  PortNetdev[label=<Provide <B>network device support</B><BR/>for network stack>, URL="group__drivers__netdev.html"];

  Start -> IfCPU;
  IfCPU -> IfBoard [label="Yes"];
  IfBoard -> IfDrivers [label="Yes"];
  IfDrivers -> IfNetdev [label="Yes"];
  IfNetdev -> End [label="Yes"];

  IfCPU -> PortCPU [label="No"];
  IfBoard -> PortBoard [label="No"];
  IfDrivers -> PortDrivers [label="No"];
  IfNetdev -> PortNetdev [label="No"];

  PortCPU -> IfBoard;
  PortBoard -> IfDrivers;
  PortDrivers -> IfNetdev;
  PortNetdev -> End;

  /* ensure No branch is on same row as If */
  {rank=same; IfCPU PortCPU}
  {rank=same; IfBoard PortBoard}
  {rank=same; IfDrivers PortDrivers}
  {rank=same; IfNetdev PortNetdev}
  /* ensure PortNodes are on top of each other */
  edge [style="invis"];
  PortCPU -> PortBoard -> PortDrivers -> PortNetdev;
}
